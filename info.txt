

ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ“ĞµĞºÑĞ°Ğ³Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ

ğŸ§© ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¿Ğ¾ÑÑĞ½ĞµĞ½Ğ¸Ğµ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹:
    domain/ â€” Ñ‚Ğ²Ğ¾Ğ¸ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸, Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ·Ğ½Ğ°ÑÑ‚ Ğ¾ REST, Ğ‘Ğ” Ğ¸ Spring.
    application/ â€” use cases (ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸), Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°, ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸.
    infrastructure/ â€” Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ²: JPA, Ğ¼Ğ°Ğ¿Ğ¿ĞµÑ€Ñ‹, Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸.
    adapter/web/ â€” REST-ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ñ‹ Ğ¸ DTO.
    port/in/ â€” Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ¸Ğ·Ğ²Ğ½Ğµ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ğ¸Ğ· ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ğ°).
    port/out/ â€” Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·ÑƒÑÑ‚ÑÑ Ğ² Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğµ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, JPA).

â“ ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ñ‚Ğ°ĞºĞ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ°:
    Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ° Ğ¸ Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€ĞºĞ° (Spring Boot Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ±ĞµĞ· Ğ±Ğ¾Ğ»Ğ¸).
    Ğ§Ñ‘Ñ‚ĞºĞ°Ñ Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¾Ğ¹ Ğ¸ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼Ğ¸ Ğ´ĞµÑ‚Ğ°Ğ»ÑĞ¼Ğ¸.
    Ğ£Ğ´Ğ¾Ğ±Ğ½Ğ° Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ.
    Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°Ñ… Ğ¸ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ….


ğŸ“¦ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° (hexagonal)

src/main/java/com/example/crm/
â”œâ”€â”€ application/                # Ğ¡ĞµÑ€Ğ²Ğ¸ÑĞ½Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ¹ (use cases)
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ ClientService.java
â”‚   â”‚   â””â”€â”€ UserService.java
â”‚   â””â”€â”€ port/
â”‚       â”œâ”€â”€ in/                 # Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ñ€Ñ‚Ñ‹ (interfaces Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¸Ğ·Ğ²Ğ½Ğµ)
â”‚       â”‚   â”œâ”€â”€ CreateClientUseCase.java
â”‚       â”‚   â””â”€â”€ GetClientsUseCase.java
â”‚       â””â”€â”€ out/                # Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ñ€Ñ‚Ñ‹ (Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹ Ğº Ğ‘Ğ”, Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼ API Ğ¸ Ñ‚.Ğ´.)
â”‚           â”œâ”€â”€ ClientRepository.java
â”‚           â””â”€â”€ UserRepository.java

â”œâ”€â”€ domain/                    # Ğ”Ğ¾Ğ¼ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ¹
â”‚   â””â”€â”€ model/
â”‚       â”œâ”€â”€ Client.java
â”‚       â”œâ”€â”€ User.java
â”‚       â”œâ”€â”€ Role.java
â”‚       â”œâ”€â”€ Status.java
â”‚       â””â”€â”€ enums/             # Ğ”Ğ¾Ğ¿. Ğ¿ĞµÑ€ĞµÑ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ
â”‚           â”œâ”€â”€ ClientType.java
â”‚           â””â”€â”€ InteractionType.java

â”œâ”€â”€ infrastructure/            # Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ (Ğ‘Ğ”, web, Ğ¸ Ñ‚.Ğ´.)
â”‚   â”œâ”€â”€ persistence/
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚   â”œâ”€â”€ ClientEntity.java
â”‚   â”‚   â”‚   â””â”€â”€ UserEntity.java
â”‚   â”‚   â”œâ”€â”€ mapper/
â”‚   â”‚   â”‚   â”œâ”€â”€ ClientMapper.java
â”‚   â”‚   â”‚   â””â”€â”€ UserMapper.java
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â”œâ”€â”€ ClientRepositoryImpl.java
â”‚   â”‚       â””â”€â”€ UserRepositoryImpl.java
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ SecurityConfig.java

â”œâ”€â”€ adapter/                   # Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€Ñ‹: REST, CLI, events
â”‚   â””â”€â”€ web/
â”‚       â”œâ”€â”€ controller/
â”‚       â”‚   â”œâ”€â”€ ClientController.java
â”‚       â”‚   â””â”€â”€ UserController.java
â”‚       â””â”€â”€ dto/
â”‚           â”œâ”€â”€ CreateClientRequest.java
â”‚           â””â”€â”€ ClientResponse.java

â””â”€â”€ HexagonalApp.java        # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ Spring Boot


Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° TDD:
ğŸ” Ğ¦Ğ¸ĞºĞ» TDD: Red â†’ Green â†’ Refactor
    Red â€“ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ (Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ğ¾Ğµ Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ ĞµÑ‰Ñ‘ Ğ½Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾).
    Green â€“ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½ÑƒÑ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ñ‚ĞµÑÑ‚ Ğ¿Ñ€Ğ¾ÑˆÑ‘Ğ».
    Refactor â€“ ÑƒĞ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ ĞºĞ¾Ğ´, Ğ½Ğµ Ğ»Ğ¾Ğ¼Ğ°Ñ Ñ‚ĞµÑÑ‚Ñ‹.


ğŸ“¤ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
@Service
public class KafkaProducer {
    private final KafkaTemplate<String, Object> kafkaTemplate;

    public KafkaProducer(KafkaTemplate<String, Object> kafkaTemplate) {
        this.kafkaTemplate = kafkaTemplate;
    }

    public void send(String topic, Object message) {
        kafkaTemplate.send(topic, message);
        System.out.println("âœ… Sent to Kafka: " + message);
    }
}

ğŸ“¥ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
@Component
public class KafkaConsumer {
    @KafkaListener(topics = "clients-topic", groupId = "crm-group")
    public void listen(Object message) {
        System.out.println("ğŸ“© Received from Kafka: " + message);
    }
}

ğŸ“Œ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
@RestController
@RequiredArgsConstructor
public class ClientController {
    private final KafkaProducer kafkaProducer;

    @PostMapping("/send")
    public ResponseEntity<?> send(@RequestBody ClientDTO client) {
        kafkaProducer.send("clients-topic", client);
        return ResponseEntity.ok("Sent!");
    }
}


//